# extras/scripts/raid.sh

Automatically creates a RAID array and mounts it to the specified mount point.

## Overview

This script facilitates the creation and mounting of a RAID array.
It includes functions to process command-line arguments, detect system disks, format and create the RAID array, and mount it.
The script checks for minimum disk requirements, validates RAID levels and filesystem types, and provides feedback to the user.

## Index

* [raid::process::args](#raidprocessargs)

* [raid::disk::detection](#raiddiskdetection)

* [raid::format::disk](#raidformatdisk)

* [raid::create::mdadm::disk](#raidcreatemdadmdisk)

* [raid::mount::mdadm::disk](#raidmountmdadmdisk)


## RAID Processing Functions

Functions related to processing RAID array creation.

### raid::process::args

This function handles the parsing and validation of command-line arguments passed to the script.
It sets global variables for RAID level, mount point, filesystem type, and disk name.
The function also checks for valid RAID levels and filesystem types, and ensures there are enough disks for the chosen RAID level.
If the arguments are incorrect or insufficient, it provides feedback and exits.

#### Arguments

* **$1** (string): The desired RAID level (0, 5, 6, 10).
* **$2** (string): Optional. The mount point for the RAID array. Default: /home.
* **$3** (string): Optional. The filesystem type for the RAID array. Default: ext4.
* **$4** (string): Optional. The name of the RAID array. Default: md0.

#### Exit codes

* **0**: Success.
* **1**: Error due to incorrect number of arguments, invalid RAID level, invalid filesystem type, insufficient number of disks, or user cancellation.

### raid::disk::detection

This function identifies the root device and then enumerates all other storage devices that are not part of any existing RAID array.
This detection is crucial to determine which disks are available for formatting and inclusion in the new RAID array.
The function sets global variables for the disks to be formatted and their count.

#### Output on stdout

* Informs about the system disk, disks to be formatted, and their count.

### raid::format::disk

This function prompts the user to confirm disk formatting and proceeds to wipe and partition each disk in preparation for RAID array creation.
It ensures that each disk is properly prepared and partitioned with the specified filesystem type.

#### Output on stdout

* Guides the user through disk formatting process and reports on the status of each disk.

### raid::create::mdadm::disk

This function creates a RAID array with the specified RAID level using the mdadm utility.
It handles different RAID levels and configures the RAID array accordingly.
The RAID array is created using the disks that were formatted in the previous step.

#### Output on stdout

* Details the RAID creation process and reports any errors encountered.

### raid::mount::mdadm::disk

After creating the RAID array, this function mounts it to the provided mount point.
It also updates the /etc/fstab file to ensure the RAID array is mounted automatically on boot.

#### Output on stdout

* Indicates the mounting process of the RAID array and updates the /etc/fstab file.

---
This file was auto-generated by [shdoc](https://github.com/MediaEase/shdoc)
